"use strict";(self["webpackChunkweather_app"]=self["webpackChunkweather_app"]||[]).push([[865],{1865:(e,t,a)=>{a.r(t),a.d(t,{default:()=>W});var i=a(3673),n=a(2323),l=a(8880);const o={class:"col q-pt-lg q-px-md"},s={class:"col text-white text-center"},h={class:"text-h4 text-weight-light"},r={class:"text-h6 text-weight-light"},c={class:"text-h1 text-weight-thin q-my-lg"},d=(0,i._)("span",{class:"text-h4 relative-position degree"},"Â°C",-1),p={class:"col text-center"},g=["src"],u={key:1,class:"col column text-center text-white"},w=(0,i._)("div",{class:"col text-h2 text-weight-thin"},[(0,i.Uk)(" Quasar"),(0,i._)("br"),(0,i.Uk)(" Weather ")],-1),m=(0,i._)("div",null,"Find my location",-1),k=(0,i._)("div",{class:"col skyline"},null,-1);function _(e,t,a,_,y,x){const f=(0,i.up)("q-icon"),C=(0,i.up)("q-btn"),b=(0,i.up)("q-input"),q=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(q,{class:(0,n.C_)(["flex column",e.bgClass])},{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i.Wm)(b,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),onKeyup:(0,l.D2)(e.getWeatherBySearch,["enter"]),placeholder:"Search",dark:"",borderless:""},{before:(0,i.w5)((()=>[(0,i.Wm)(f,{name:"my_location","cursor-pointer":"",onClick:e.getLocation},null,8,["onClick"])])),append:(0,i.w5)((()=>[(0,i.Wm)(C,{round:"",dense:"",flat:"",icon:"search",onClick:e.getWeatherBySearch},null,8,["onClick"])])),_:1},8,["modelValue","onKeyup"])]),e.weatherData?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",s,[(0,i._)("div",h,(0,n.zw)(e.weatherData.name),1),(0,i._)("div",r,(0,n.zw)(e.weatherData.weather[0].main),1),(0,i._)("div",c,[(0,i._)("span",null,(0,n.zw)(Math.round(e.weatherData.main.temp)),1),d])]),(0,i._)("div",p,[(0,i._)("img",{src:`http://openweathermap.org/img/wn/${e.weatherData.weather[0].icon}@2x.png`},null,8,g)])],64)):((0,i.wg)(),(0,i.iD)("div",u,[w,(0,i.Wm)(C,{class:"col",flat:"",onClick:e.getLocation},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{left:"",size:"3em",name:"my_location"}),m])),_:1},8,["onClick"])])),k])),_:1},8,["class"])}var y=a(52),x=a.n(y);const f=(0,i.aZ)({name:"PageIndex",data(){return{search:"",weatherData:null,lat:null,lon:null,apiUrl:"https://api.openweathermap.org/data/2.5/weather",APIkey:"22eec85aa6ed8dab32e2f235b8be21d0"}},computed:{bgClass(){if(this.weatherData)return this.weatherData.weather[0].icon.endsWith("n")?"bg-night":"bg-day"}},methods:{getLocation(){this.$q.loading.show(),this.$q.platform.is.electron?x().get("https://api.freegeoip.app/json?apikey=e306e990-272a-11ec-871a-7dff279e4bcb").then((e=>{this.lat=e.data.latitude,this.lon=e.data.longitude,this.getWeatherByCoords()})):navigator.geolocation.getCurrentPosition((e=>{this.lat=e.coords.latitude,this.lon=e.coords.longitude,this.getWeatherByCoords(),console.log("working ",e),this.$q.loading.hide()}))},getWeatherByCoords(){this.$q.loading.show(),x()(`${this.apiUrl}?lat=${this.lat}&lon=${this.lon}&appid=${this.APIkey}&units=metric`).then((e=>{this.weatherData=e.data,this.$q.loading.hide()}))},getWeatherBySearch(){this.$q.loading.show(),x()(`${this.apiUrl}?q=${this.search}&appid=${this.APIkey}&units=metric`).then((e=>{this.weatherData=e.data,this.$q.loading.hide()}))}}});var C=a(4379),b=a(1592),q=a(4554),v=a(7435),$=a(7518),D=a.n($);f.render=_;const W=f;D()(f,"components",{QPage:C.Z,QInput:b.Z,QIcon:q.Z,QBtn:v.Z})}}]);